# TaskMaster Dashboard - Product Requirements Document

## Project Overview

TaskMaster Dashboard is a progressive web application that provides a visual interface for managing TaskMaster tasks and issues. The project follows a phased approach:

**Phase 1 (Weeks 1-3)**: Task Viewer + Issue Tracker
**Phase 2 (Week 4)**: Real-time Terminal Viewer
**Phase 3 (Weeks 5-8+)**: Full Development Dashboard

## Phase 1: Task Viewer + Issue Tracker (MVP)

### Week 1: Foundation & Backend Services

**Backend Services:**
- TaskMasterService: Read and watch tasks.json file
  - Load all tasks with hierarchy
  - Watch for file changes
  - Get current task
  - Handle subtask relationships

- IssueService: Manage issues in .taskmaster/issues/
  - List all issues with filtering
  - Create new issues
  - Update existing issues
  - Delete issues
  - Handle attachments

**API Routes:**
- Create REST endpoints for tasks (GET /api/tasks, GET /api/tasks/:id, GET /api/tasks/current)
- Create REST endpoints for issues (full CRUD)
- Set up error handling and logging
- Configure environment variables

**Testing:**
- Unit tests for services
- Integration tests for API
- Test with real .taskmaster directory

### Week 2: Frontend Components

**Layout Components:**
- Header with navigation, search, and filters
- Sidebar for issues panel
- Main layout with two-column structure (70/30 split)
- Responsive layout for mobile and tablet

**Task Components:**
- TaskList to display all tasks
- TaskCard for individual tasks with subtasks
- TaskDetail modal for full task information
- StatusBadge for status indicators
- PriorityBadge for priority display
- ProgressBar for subtask completion

**Issue Components:**
- IssueTracker panel for issues list
- IssueCard for individual issues
- IssueForm for creating and editing
- IssueDetail modal for full information
- SeverityBadge for issue severity

**Shared Components:**
- SearchBar with fuzzy search
- FilterBar for status and priority filtering
- EmptyState for no results
- LoadingState for async operations

### Week 3: Integration & Polish

**Feature Integration:**
- Connect all components to API endpoints
- Implement React Query for state management
- Add optimistic UI updates
- Set up real-time file watching
- Implement issue-task linking

**Responsive Design:**
- Mobile layout with single column
- Tablet layout with collapsible sidebar
- Touch-friendly interactions
- Performance optimization for large task lists

**Testing & Documentation:**
- End-to-end tests for critical user flows
- User guide with screenshots
- API documentation
- Deploy to Replit
- Verify all acceptance criteria

## Phase 2: Terminal Viewer (Week 4)

### Days 1-3: Terminal Backend

**TerminalService:**
- Create PTY sessions with node-pty
- Manage multiple terminal sessions
- Handle session lifecycle (create, attach, close)
- Support session resizing

**WebSocket Integration:**
- Set up Socket.io server
- Handle terminal-output events
- Handle terminal-input events
- Implement session reconnection logic

### Days 4-5: Terminal Frontend

**Terminal Components:**
- TerminalViewer with xterm.js integration
- TerminalTabs for multiple terminals
- TerminalControls (clear, copy, download, search)

**Custom Hooks:**
- useTerminal for terminal lifecycle
- useWebSocket for connection management

**Terminal Configuration:**
- Tokyo Night theme
- JetBrains Mono font
- Proper ANSI color rendering
- Scrollback buffer

### Days 6-7: Integration & Polish

**Integration:**
- Add terminal to main layout (center panel, 60% width)
- Implement session persistence
- Add multiple terminal tabs
- Integrate terminal controls

**Testing:**
- Performance testing with large outputs (1000+ lines)
- Latency testing (<100ms requirement)
- Session persistence testing
- WebSocket reconnection testing

## Phase 3: Full Dashboard (Weeks 5-8+)

### Week 5: File Tree Navigation

**FileService:**
- Recursive directory traversal
- File content reading
- Recent files tracking
- File watching with chokidar

**File Components:**
- FileTree with recursive rendering
- FileNode for files and folders
- FileSearch with fuzzy matching
- Virtual scrolling for large directories

**Git Integration:**
- Read git status
- Display status indicators on files
- Update in real-time on changes

### Week 6: Git Dashboard

**GitService:**
- Get current git status using simple-git
- Fetch recent commits
- Get file diffs
- Stage and unstage files

**Git Components:**
- GitDashboard panel
- GitStatus with branch info
- CommitHistory with recent commits
- DiffViewer for file changes

### Week 7: MCP Server Manager

**MCPService:**
- Read .mcp.json configuration
- Check server status
- Start and stop servers
- Get server tools
- Stream server logs

**MCP Components:**
- MCPManager for servers list
- ServerCard for individual servers
- ToolsList modal
- ServerLogs viewer

### Week 8: Polish & Deploy

**Final Integration:**
- Three-panel layout (file tree | terminal | sidebar)
- Dark mode with Tokyo Night theme
- Responsive design updates
- Performance optimization
- Error handling and recovery

**Testing & Documentation:**
- Comprehensive E2E tests
- Performance testing
- Security audit
- Complete user documentation
- API documentation
- Deployment guides for Replit, Docker, and VPS

## Technical Requirements

### Technology Stack
- Frontend: React 18, TypeScript 5.6, Vite 5.4, Tailwind CSS 3.4
- Backend: Express 4, Node.js 20 LTS, TypeScript
- Terminal: xterm.js, node-pty, Socket.io
- Git: simple-git
- File Watching: chokidar

### TaskMaster Integration
- Read .taskmaster/tasks/tasks.json (read-only)
- Manage .taskmaster/issues/ directory (read-write)
- Watch for file changes
- Support task hierarchy and dependencies
- Link issues to tasks

### Design System
- Design Language: Linear + Material Design hybrid
- Theme: Tokyo Night (dark mode)
- Typography: Inter (UI), JetBrains Mono (code)
- Spacing: Tailwind primitives (2, 4, 6, 8)

### Performance Requirements
- Page load < 2 seconds
- Terminal latency < 100ms
- Search results < 300ms
- Support 10,000+ files in tree
- Handle 1000+ lines in terminal
- No crashes in 8-hour session

### Deployment Targets
- Primary: Replit (already configured)
- Optional: Docker containers
- Optional: VPS with PM2

## Success Criteria

### Phase 1 Success Criteria
- View all tasks from tasks.json
- Expandable subtask hierarchy working
- Create/edit/delete issues
- Link issues to tasks
- Search and filter functional
- Mobile-responsive design
- Zero crashes in 8-hour test

### Phase 2 Success Criteria
- Real-time terminal streaming
- Multiple terminal tabs
- Session persistence across refresh
- ANSI colors rendering correctly
- Latency < 100ms
- Handle 1000+ lines without lag

### Phase 3 Success Criteria
- File tree with 10,000+ files
- Git status updates < 1s
- MCP servers manageable
- All features integrated seamlessly
- Production-ready deployment
- Complete documentation
